<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

    <meta charset="utf-8" />
    <title>Task 6</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
</head>

<body>
    <script type="application/javascript">
        function createFamilyTree() {
            $('body').append('<table></table>')
            $('table').append('<thead></thead>')
            $('thead').append('<tr></tr>')
            $('tr').append('<th></th>', '<th></th>')
            $('tr > th:first').text('Firstname')
            $('tr > th:last').text('Lastname')
            $('table').append('<tbody></tbody>')
        }

        function addNewMember(firstName, lastName, position) {
            if (position === 'before') {
                $('tbody').prepend(`<tr><td> ${firstName}</td> <td>${lastName}</td> <td>(X)</td></tr>`)
            } else {
                $('tbody').append(`<tr><td> ${firstName}</td> <td>${lastName}</td> <td>(X)</td></tr>`)
            }
            $('tbody td:last-child').css("background-color", 'orange')
            $('tbody td:last-child').click(function(){
                $(this).closest('tr').remove()
            })
        }

        function createForm() {
            $('table').before('<input type="text"></input>', '<input type="text"></input>', '<select><option value="before">Before</option><option value="after">After</option></select><input type="submit"></input>')
            $('input:last').click(function() {
                const name = $('input:first').val()
                const lastname = $('input:nth-of-type(2)').val()
                const value = $('select').val()
                addNewMember(name, lastname, value)
            })
        }
        createFamilyTree()
        createForm()
    </script>
</body>

</html>